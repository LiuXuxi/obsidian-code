
# 原理

[并查集的实现_牛客题霸_牛客网](https://www.nowcoder.com/practice/e7ed657974934a30b2010046536a5372)

```cpp
#include<iostream>
#include<vector>
using namespace std;

class UnionFind {
private:
    vector<int>father;
    vector<int>size;

    int find(int num) {
        int root = num;
        while (root != father[root])root = father[root];
        while (num != root) {
            father[num] = root;
            num = father[num];
        }
        return root;
    }

public:
    UnionFind(int n) {
        father.resize(n+1,0);
        size.resize(n+1,1);
        for (int i = 0; i < father.size(); i++)father[i] = i;
    }

    bool isSame(int a, int b) {
        int fa = find(a);
        int fb = find(b);
        return fa == fb;
    }

    void Union(int a, int b) {
        int fa = find(a);
        int fb = find(b);
        if (fa != fb) {
            if (size[fa] > size[fb]) {
                size[fa] += size[fb];
                father[fb] = fa;
            }
            else {
                size[fb] += size[fa];
                father[fa] = fb;
            }
        }
    }
};

int main() {
    int n, m;
    cin >> n >> m;
    UnionFind sln(n);
    while (m--) {
        int opt, a, b;
        cin >> opt >> a >> b; 
        switch (opt) {
        case 1:
            if (sln.isSame(a, b))cout << "Yes" << endl;
            else cout << "No" << endl;
            break;
        case 2:
            sln.Union(a, b);
        }
    }
    return 0;
}
```
/* =========================================
   1. 核心配色方案 (CSS Variables)
   ========================================= */
:root {
    --retro-bg: #1a1b16;            /* 深煤黑背景 */
    --retro-paper: #24251f;         /* 纸张/卡片色 */
    --retro-gold: #b2945a;          /* 核心古金色 */
    --retro-gold-dim: rgba(178, 148, 90, 0.3); 
    --retro-red: #8b4343;           /* 铁锈红 */
    --retro-green: #4a5d4d;         /* 暗绿 */
    --retro-text: #c5bdae;          /* 磨损米色文字 */
    --retro-text-mute: #7c766a;     /* 低亮度文字 */
    --retro-border: #3d3d33;        /* 边框线 */
    --retro-accent: #d4af37;        /* 高亮金 */
}

/* =========================================
   2. 非编辑区 UI 渲染 (UI Elements)
   ========================================= */

/* 整体界面底色 */
.app-container, .horizontal-main-container, .workspace {
    background-color: var(--retro-bg) !important;
}

/* 左侧文件管理器 (File Explorer) */
.nav-folder-title, .nav-file-title {
    color: var(--retro-text-mute) !important;
    font-family: serif !important;
}

/* 选中的文件或文件夹 */
.nav-file-title.is-active, .nav-folder-title.is-active {
    background-color: var(--retro-gold-dim) !important;
    color: var(--retro-gold) !important;
    font-weight: bold;
}

/* 鼠标悬停文件 */
.nav-file-title:hover, .nav-folder-title:hover {
    background-color: rgba(178, 148, 90, 0.1) !important;
    color: var(--retro-gold) !important;
}

/* 顶部标签页 (Tabs) */
.tab-header {
    background-color: var(--retro-bg) !important;
    border-bottom: 2px solid var(--retro-border) !important;
}

.tab-header.is-active {
    background-color: var(--retro-paper) !important;
    border-bottom: 2px solid var(--retro-gold) !important;
}

/* 侧边图标栏 (Ribbon) */
.side-nav-view {
    background-color: #141511 !important;
    border-right: 1px solid var(--retro-border) !important;
}

.side-nav-view .clickable-icon {
    color: var(--retro-gold-dim) !important;
}

.side-nav-view .clickable-icon:hover {
    color: var(--retro-gold) !important;
}

/* 底部状态栏 (Status Bar) */
.status-bar {
    background-color: #141511 !important;
    border-top: 1px solid var(--retro-border) !important;
    color: var(--retro-text-mute) !important;
    font-size: 11px;
}

/* =========================================
   3. 全语法 Markdown 渲染 (Editor & Preview)
   ========================================= */

/* 基础文字与背景 */
.markdown-source-view.mod-cm6, .markdown-rendered {
    background-color: var(--retro-bg) !important;
    color: var(--retro-text) !important;
    line-height: 1.8;
}

/* 链接 (Internal & External) */
.markdown-rendered a, .cm-link, .cm-hmd-internal-link {
    color: var(--retro-gold) !important;
    text-decoration: underline rgba(178, 148, 90, 0.3) !important;
}

/* 加粗、斜体、删除线 */
strong, .cm-strong { color: var(--retro-accent) !important; }
em, .cm-em { color: var(--retro-text); font-family: serif; }
del, .cm-strikethrough { color: var(--retro-text-mute) !important; }

/* 列表与任务 (Lists & Tasks) */
.markdown-rendered li::marker { color: var(--retro-gold) !important; }
.task-list-item-checkbox { border: 1px solid var(--retro-gold) !important; }

/* 代码块 (Inline & Block) */
code { color: #8fa38a !important; background-color: #121212 !important; }
pre code { display: block; padding: 15px !important; border: 1px solid var(--retro-border) !important; }

/* 引用块 (Blockquote) */
blockquote {
    border-left: 3px double var(--retro-gold) !important;
    background-color: rgba(178, 148, 90, 0.05) !important;
    color: #a8a090 !important;
}

/* 分割线 (HR) */
hr { background-image: linear-gradient(to right, transparent, var(--retro-gold), transparent) !important; }

/* 标签 (Tags) */
.tag, a.tag {
    background-color: var(--retro-gold-dim) !important;
    color: var(--retro-gold) !important;
    border: 1px solid var(--retro-gold-dim) !important;
    border-radius: 4px;
}

/* 脚注 (Footnotes) */
.footnotes { border-top: 1px solid var(--retro-border); font-size: 0.9em; opacity: 0.8; }

/* =========================================
   4. 动态 Tab 表格系统 (Tabs System)
   ========================================= */

/* 1. 容器：支持横向滚动表头 */
.retro-tabs-container {
    display: flex;
    flex-direction: column;
    background-color: var(--retro-paper);
    border: 1px solid var(--retro-border);
    border-radius: 8px;
    overflow: hidden;
    margin: 20px 0;
}

/* 2. 隐藏单选框 */
.retro-tabs-container input[type="radio"] {
    display: none;
}

/* 3. 表头区域：支持滑动 */
.retro-tabs-header {
    display: flex;
    overflow-x: auto;
    background-color: #141511;
    border-bottom: 2px solid var(--retro-border);
    scrollbar-width: none; /* 隐藏滚动条 */
}

.retro-tabs-header::-webkit-scrollbar { display: none; }

/* 4. 模拟表头项（Label） */
.retro-tabs-header label {
    padding: 12px 20px;
    cursor: pointer;
    color: var(--retro-text-mute);
    font-family: serif;
    white-space: nowrap;
    transition: all 0.3s;
    border-bottom: 2px solid transparent;
}

.retro-tabs-header label:hover {
    color: var(--retro-gold);
}

/* 5. 选中状态：古金色高亮 */
#tab1:checked ~ .retro-tabs-header label[for="tab1"],
#tab2:checked ~ .retro-tabs-header label[for="tab2"],
#tab3:checked ~ .retro-tabs-header label[for="tab3"] {
    color: var(--retro-gold) !important;
    border-bottom: 2px solid var(--retro-gold);
    background-color: rgba(178, 148, 90, 0.1);
}

/* 6. 内容区域切换逻辑 */
.tab-content {
    display: none;
    padding: 15px;
    animation: fadeIn 0.4s;
}

/* 根据选中显示对应内容 */
#tab1:checked ~ #content1,
#tab2:checked ~ #content2,
#tab3:checked ~ #content3 {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
}
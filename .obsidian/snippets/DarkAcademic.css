:root {
    /* 暗色复古调色盘 */
    --dark-retro-bg: #1a1b16;      /* 深煤黑背景 */
    --dark-retro-paper: #24251f;   /* 纸张色（用于卡片/表格） */
    --dark-retro-text: #c5bdae;    /* 磨损的米色文字 */
    --dark-retro-gold: #b2945a;    /* 古金色（高亮/链接） */
    --dark-retro-red: #8b4343;     /* 暗铁锈红 */
    --dark-retro-border: #3d3d33;  /* 深色边框线 */
}

/* 全局应用 */
.theme-dark {
    --background-primary: var(--dark-retro-bg);
    --background-secondary: var(--dark-retro-bg);
    --text-normal: var(--dark-retro-text);
}

/* 标题样式：带左侧金边 */
.markdown-rendered h1, .cm-header-1,
.markdown-rendered h2, .cm-header-2 {
    color: var(--dark-retro-red) !important;
    border-left: 3px solid var(--dark-retro-gold);
    padding-left: 15px;
    margin-top: 1.5em;
}

/* 加粗：古金色 */
.markdown-source-view.mod-cm6 .cm-strong, 
.markdown-rendered strong {
    color: var(--dark-retro-gold) !important;
    font-weight: bold;
}

/* 高亮：暗调荧光 */
.markdown-source-view.mod-cm6 .cm-highlight,
.markdown-rendered mark {
    background-color: #3e3a2e !important; /* 暗金色背景 */
    color: #e2d1a6 !important;            /* 亮金文字 */
    padding: 0 4px;
}

/* 表格容器样式 */
.callout table, .markdown-rendered table {
    border: 1px solid var(--dark-retro-border) !important;
    background-color: var(--dark-retro-paper) !important;
    border-collapse: collapse !important;
    width: 100%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3); /* 增加深度感 */
}

/* 表头：深绿色质感 */
.markdown-rendered th {
    background-color: #2d3027 !important; /* 深橄榄绿 */
    color: var(--dark-retro-gold) !important;
    border-bottom: 2px solid var(--dark-retro-gold) !important;
    padding: 12px !important;
}

/* 单元格 */
.markdown-rendered td {
    border-bottom: 1px solid var(--dark-retro-border) !important;
    padding: 10px !important;
}

/* 斑马纹 */
.markdown-rendered tr:nth-child(even) {
    background-color: #1e1f1a !important;
}

.callout[data-callout="note"] {
    background-color: #21221c !important;
    border: 1px solid var(--dark-retro-gold) !important;
    border-left: 4px solid var(--dark-retro-gold) !important;
    color: var(--dark-retro-text) !important;
}

/* 复古列表符号 */
.markdown-rendered li::marker {
    color: var(--dark-retro-gold) !important;
    font-size: 1.1em;
}

/* 任务列表复选框：改为古金色边框 */
.task-list-item-checkbox {
    border: 1px solid var(--dark-retro-gold) !important;
    background-color: transparent !important;
    appearance: none;
    border-radius: 2px;
}

.task-list-item-checkbox:checked {
    background-color: var(--dark-retro-gold) !important;
}

/* 基础引用块美化 */
.markdown-rendered blockquote {
    border-left: 3px double var(--dark-retro-gold) !important; /* 双线边框 */
    background-color: rgba(178, 148, 90, 0.05) !important; /* 极淡的金光背景 */
    color: #a8a090 !important;
    font-style: italic;
    margin: 1.5em 10px !important;
    padding: 10px 20px !important;
}

/* 代码块美化 */
.markdown-rendered pre, .cm-s-obsidian pre {
    background-color: #121212 !important; /* 纯黑底 */
    border: 1px solid var(--dark-retro-border) !important;
    border-radius: 8px !important;
    padding: 1em !important;
}

code {
    font-family: 'Courier New', monospace !important; /* 经典打印机字体 */
    color: #8fa38a !important; /* 柔和的植物绿 */
}

/* 装饰性边框 Callout */
.callout[data-callout="abstract"] {
    background-color: transparent !important;
    border: 2px dashed var(--dark-retro-gold) !important;
    border-radius: 0 !important; /* 移除圆角，更硬朗 */
}

.callout[data-callout="abstract"] .callout-title {
    color: var(--dark-retro-gold) !important;
    text-transform: uppercase;
    letter-spacing: 2px;
}

/* 优雅的分割线 */
.markdown-rendered hr {
    height: 1px;
    background-image: linear-gradient(to right, transparent, var(--dark-retro-gold), transparent) !important;
    border: none !important;
    margin: 2em 0 !important;
}

/* 鼠标悬浮预览小窗美化 */
.popover.hover-popover {
    background-color: var(--dark-retro-paper) !important;
    border: 1px solid var(--dark-retro-gold) !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5) !important;
    border-radius: 8px !important;
}

.popover.hover-popover .markdown-rendered {
    padding: 15px !important;
}

/* 左侧文件列表：选中项高亮为暗金 */
.nav-file-title.is-active, .nav-folder-title.is-active {
    background-color: rgba(178, 148, 90, 0.15) !important;
    color: var(--dark-retro-gold) !important;
}

/* 隐藏左边栏的多余线条，更极简 */
.nav-file-title, .nav-folder-title {
    color: #888275; /* 未选中状态的文字色 */
}

.nav-file-title:hover, .nav-folder-title:hover {
    color: var(--dark-retro-gold) !important;
}

/* 文末脚注样式 */
.footnotes {
    border-top: 1px solid var(--dark-retro-border) !important;
    color: #888275 !important;
    font-size: 0.85em;
}

/* 脚注跳转链接颜色 */
.footnote-link, .footnote-backref {
    color: var(--dark-retro-gold) !important;
    text-decoration: none !important;
}

/* 选中文本时的背景颜色 */
::selection {
    background-color: rgba(139, 67, 67, 0.4) !important; /* 淡淡的铁锈红 */
    color: #ffffff !important;
}

/* 搜索结果的高亮 */
.search-result-file-matches span.is-matched {
    background-color: var(--dark-retro-gold) !important;
    color: #1a1b16 !important;
    border-radius: 2px;
}


/* 标签美化 */
.tag, a.tag {
    background-color: rgba(178, 148, 90, 0.1) !important;
    color: var(--dark-retro-gold) !important;
    border: 1px solid rgba(178, 148, 90, 0.3) !important;
    border-radius: 4px !important;
    padding: 2px 8px !important;
    font-family: serif !important;
    transition: all 0.2s;
}

.tag:hover {
    background-color: var(--dark-retro-gold) !important;
    color: #1a1b16 !important;
}

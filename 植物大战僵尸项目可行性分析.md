
# 一.技术可行性
-  基础技术知识（全员达到）：
	1. cpp达到面向对象（封装、继承、多态）
	2. Git的使用（上传代码到Gitee）
- 额外技术：
	 1.  EasyX图形界面工具（至少六人）
	 2. 异步（至少三人）
	 3. 文件流保存数据

# 二.功能描述

- 核心功能

	1. 僵尸、子弹、阳光产生与移动的异步进行
	2. 植物与僵尸，子弹与僵尸的碰撞检测（可能触发一些功能，如僵尸攻击植物，植物攻击僵尸）
	3. 植物与僵尸的死亡判定
	4. 创建植物对象
	5. 图片的不断刷新，图片跟随鼠标（如选择植物种植位置）
	6. 僵尸的出场时间
	7. 阳光刷新（刷新时间与刷新位置）
	8. 游戏结束判断

- 拓展内容

	1. 登录 注册的实现
	
	2. 能量豆（待定）
	
	3. 商店系统

	4. 铲子功能
	5. 游戏模式：根据阳光种植植物，或给出特定植物种植

# 三．数据设计与逻辑描述

1. 数据设计
	- 宏定义设计
		```
		#define WINDOW_HEIGHT 880//窗口高度尺寸
		#define WINDOW_WIDTH  800//窗口宽度尺寸
		#define MAP_SIZE_LENGTH 9//地图长度
		#define MAP_SIXE_WIDTH  5//地图宽度
		#define SUN_SPEED_PRO 2//环境产生阳关的速度，每两分钟产生一个阳光
		#define ORIGIN_SUN    5//初始化阳光数量，用于购买初始植物
		#define SUN_SPEED_FALL 0.5//阳光掉落的时间
		#define SUN_SPEED_LIVE 5//阳光存活的时间
		#define ZOMBIES_MAX_SUM 20 //当前僵尸总数
		#define ZOMBIES_SPEED_MOVE 50//僵尸移动的速度，如每秒移动50
		```
	- 全局变量设计
		```
		int SUN_SUM;//当前拥有的阳光数量
		int map[MAP_SIZE_LENGTH][MAP_SIXE_WIDTH];//地图大小
		double run_time;//记录游戏开始时间
		int ZOMBIES_DEAD_SUM;//当前死亡的僵尸数量
		typedef struct {
			int x;
			int y;
		}Position;//位置结构体
		//植物父类指针数组，创建植物时根据创建位置是否为nullptr来判断是否能创建
		//能创建，则指针指向创建的子植物对象
		Plant* arr[MAP_SIZE_LENGTH][MAP_SIXE_WIDTH];
		Zombie* zombies[ZOMBIES_MAX_SUM];//僵尸对象数组
		Sun* sun[500];//阳光对象数组
		IMAGE image[20];//对象贴图数组
		```
	- 类的设计
		```
			//阳光类：
		class sun {
		private:
			double livetime;//已经存活的时间
			double live_begin;//开始存活的时间
			Position pos_begin;//开始掉落位置
			Position pos_end;//结束掉落位置
			IMAGE image;//贴图
		
		};
		
		//子弹类
		class Bullet {
		private:
			double speed;//移速
			int damage;//造成的伤害
			bool isAlive;//是否还存在（是否激活）
			Position pos;//子弹的位置
		};
		
		//植物基本类
		class Plant {
		protected:
			int blood;//植物血量
			Position pos;//植物位置
			bool isAlive;//植物是否存活
			int damage;//植物能造成的伤害
			int damage_speed;//植物攻速
			IMAGE image;//植物贴图
		};
		
		//向日葵类
		class SunFlower :public Plant {
		private:
			double sun_speed_produce;//生产阳光的速度
			double init_time;//记录向日葵创建的时间，计算是否生产阳光
		};
		
		//射手类
		class Shooter :public Plant{};
		
		//坚果类
		class Nut:public Plant{};
		
		//僵尸基本类
		class Zombie {
		protected:
			bool isOnMap;//是否进入地图中
			bool isAlive;//僵尸是否存活
			double alive_time;//开始进入地图的时间
			int blood;//僵尸血量
			int damage;//僵尸每次攻击伤害
			double damage_speed;//僵尸攻击频率
			double move_speed;//僵尸移速
			Position pos;//僵尸位置
		};
		```
2. 逻辑描述
	1. 进入该关卡地图，加载游戏界面，从此刻开始计时，run_time=clock();，
	2. 游戏开始后，环境根据计数时间开始产生阳关，僵尸根据出现时间了陆续出现在地图中，玩家可根据阳光数量进行植物创建
	3. 僵尸行为：isOnMap=true，并以move_speed的移速开始沿y方向进行移动，当遇到植物时，即该位置的植物数组的指针非空时，僵尸开始以damage_speed的攻速和dagame的伤害开始攻击植物，直到僵尸死亡或植物死亡。若僵尸血量为0，则死亡，isAlive=false，同时刷新image。
	4. 阳光行为：环境根据run_time产生阳光对象，阳光随机从x=0方向位置掉落到指定位置，向日葵根据创建对象的时间和产生阳光的速度创建阳光对象。阳光根据